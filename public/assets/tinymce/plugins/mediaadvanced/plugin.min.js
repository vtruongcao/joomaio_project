tinymce.PluginManager.add("mediaadvanced", function (e, t) {
    e.addButton("mediaadvanced", {
            icon:"media",
            text: "",
            tooltip: "Media library",
            onclick: function () {
                const siteUrl = location.protocol + '//' + location.host;
                e.windowManager.open({
                    title: "Media library",
                    url: siteUrl+"/admin/loadmd",
                    classes: 'mycustom',
                    buttons: [
                        {
                            text: "Insert",
                            onclick: function () {
                                var t = e.windowManager.getWindows()[0];
                                var val = t.getContentWindow().document.getElementById("content").value;
                                var alt = t.getContentWindow().document.getElementById("alt").value;
                                var w = t.getContentWindow().document.getElementById("width").value;
                                var h = t.getContentWindow().document.getElementById("height").value;
                                if(val) {
                                    e.insertContent(`<img src="${val}" alt="${alt}" style="width: ${w}px; height: ${h}px;">`), t.close();
                                }
                            },
                        },
                        { text: "Close", onclick: "close" },
                    ],
                });
            },
        });
});